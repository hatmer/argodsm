<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ArgoDSM - Software Distributed Shared Memory: /home/atmerhannah/argodsm/src/allocators/collective_allocator.hpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ArgoDSM - Software Distributed Shared Memory
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_6c23b03f1c1f5d39fa4681c6907c68b5.html">allocators</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">collective_allocator.hpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file provides the collective allocator for ArgoDSM.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;map&gt;</code><br />
<code>#include &lt;memory&gt;</code><br />
<code>#include &lt;stack&gt;</code><br />
<code>#include &quot;<a class="el" href="dynamic__mempool_8hpp_source.html">../mempools/dynamic_mempool.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="global__mempool_8hpp_source.html">../mempools/global_mempool.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="backend_8hpp_source.html">../backend/backend.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dynamic__allocator_8hpp_source.html">dynamic_allocator.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="generic__allocator_8hpp_source.html">generic_allocator.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="null__lock_8hpp_source.html">null_lock.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="collective__allocator_8h_source.html">collective_allocator.h</a>&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for collective_allocator.hpp:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="collective__allocator_8hpp__incl.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
</div><div class="textblock"><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> This graph shows which files directly or indirectly include this file:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="collective__allocator_8hpp__dep__incl.svg" width="100%" height="573"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
</div>
<p><a href="collective__allocator_8hpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespaceargo"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceargo.html">argo</a></td></tr>
<tr class="memdesc:namespaceargo"><td class="mdescLeft">&#160;</td><td class="mdescRight">ArgoDSM namespace. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceargo_1_1allocators"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceargo_1_1allocators.html">argo::allocators</a></td></tr>
<tr class="memdesc:namespaceargo_1_1allocators"><td class="mdescLeft">&#160;</td><td class="mdescRight">namespace for ArgoDSM's own allocators <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:abbd225fad8e9f6c67b59ccdfbeb8e1e7"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceargo_1_1allocators_abbd225fad8e9f6c67b59ccdfbeb8e1e7.html#abbd225fad8e9f6c67b59ccdfbeb8e1e7">argo::allocators::collective_allocator</a> = generic_allocator&lt; char, mempools::dynamic_memory_pool&lt; global_allocator, mempools::NODE_ZERO_ONLY &gt;, null_lock &gt;</td></tr>
<tr class="memdesc:abbd225fad8e9f6c67b59ccdfbeb8e1e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">type alias for collective allocator: allocate from dynamically growing pool (backed by global memory allocator) without locking  <a href="namespaceargo_1_1allocators_abbd225fad8e9f6c67b59ccdfbeb8e1e7.html#abbd225fad8e9f6c67b59ccdfbeb8e1e7">More...</a><br /></td></tr>
<tr class="separator:abbd225fad8e9f6c67b59ccdfbeb8e1e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a09ca0ec2df9dbed721fb14b26cfa39a3"><td class="memTemplParams" colspan="2">template&lt;typename T , allocation... APs&gt; </td></tr>
<tr class="memitem:a09ca0ec2df9dbed721fb14b26cfa39a3"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespaceargo_a09ca0ec2df9dbed721fb14b26cfa39a3.html#a09ca0ec2df9dbed721fb14b26cfa39a3">argo::codelete_</a> (T *ptr)</td></tr>
<tr class="memdesc:a09ca0ec2df9dbed721fb14b26cfa39a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">template function to delete objects that were allocated using collective_new  <a href="namespaceargo_a09ca0ec2df9dbed721fb14b26cfa39a3.html#a09ca0ec2df9dbed721fb14b26cfa39a3">More...</a><br /></td></tr>
<tr class="separator:a09ca0ec2df9dbed721fb14b26cfa39a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7e8ddf5784dd37c965cfd43cd65a330"><td class="memTemplParams" colspan="2">template&lt;typename T , allocation... APs&gt; </td></tr>
<tr class="memitem:aa7e8ddf5784dd37c965cfd43cd65a330"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespaceargo_aa7e8ddf5784dd37c965cfd43cd65a330.html#aa7e8ddf5784dd37c965cfd43cd65a330">argo::codelete_array</a> (T *ptr)</td></tr>
<tr class="memdesc:aa7e8ddf5784dd37c965cfd43cd65a330"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a globally collectively allocated array of objects.  <a href="namespaceargo_aa7e8ddf5784dd37c965cfd43cd65a330.html#aa7e8ddf5784dd37c965cfd43cd65a330">More...</a><br /></td></tr>
<tr class="separator:aa7e8ddf5784dd37c965cfd43cd65a330"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43db7086bc5f4070897fc687ea7e950c"><td class="memTemplParams" colspan="2">template&lt;typename T , allocation... APs, typename... Ps&gt; </td></tr>
<tr class="memitem:a43db7086bc5f4070897fc687ea7e950c"><td class="memTemplItemLeft" align="right" valign="top">T *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespaceargo_a43db7086bc5f4070897fc687ea7e950c.html#a43db7086bc5f4070897fc687ea7e950c">argo::conew_</a> (Ps &amp;&amp;... ps)</td></tr>
<tr class="memdesc:a43db7086bc5f4070897fc687ea7e950c"><td class="mdescLeft">&#160;</td><td class="mdescRight">template function to construct new objects using collective allocation  <a href="namespaceargo_a43db7086bc5f4070897fc687ea7e950c.html#a43db7086bc5f4070897fc687ea7e950c">More...</a><br /></td></tr>
<tr class="separator:a43db7086bc5f4070897fc687ea7e950c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a532a530aefb04b559d017b8ac402feb5"><td class="memTemplParams" colspan="2">template&lt;typename T , allocation... APs&gt; </td></tr>
<tr class="memitem:a532a530aefb04b559d017b8ac402feb5"><td class="memTemplItemLeft" align="right" valign="top">T *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespaceargo_a532a530aefb04b559d017b8ac402feb5.html#a532a530aefb04b559d017b8ac402feb5">argo::conew_array</a> (size_t <a class="el" href="uninitialized_8cpp_aa66b7725a5567b78a94e77bd286ca137.html#aa66b7725a5567b78a94e77bd286ca137">size</a>)</td></tr>
<tr class="memdesc:a532a530aefb04b559d017b8ac402feb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Collectively construct a new array of objects in the global memory.  <a href="namespaceargo_a532a530aefb04b559d017b8ac402feb5.html#a532a530aefb04b559d017b8ac402feb5">More...</a><br /></td></tr>
<tr class="separator:a532a530aefb04b559d017b8ac402feb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a20676d183339cf5fd816172f3b8020c9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceargo_1_1allocators_abbd225fad8e9f6c67b59ccdfbeb8e1e7.html#abbd225fad8e9f6c67b59ccdfbeb8e1e7">collective_allocator</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceargo_1_1allocators_a20676d183339cf5fd816172f3b8020c9.html#a20676d183339cf5fd816172f3b8020c9">argo::allocators::default_collective_allocator</a></td></tr>
<tr class="memdesc:a20676d183339cf5fd816172f3b8020c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">default collective allocator, using bytes as base unit  <a href="namespaceargo_1_1allocators_a20676d183339cf5fd816172f3b8020c9.html#a20676d183339cf5fd816172f3b8020c9">More...</a><br /></td></tr>
<tr class="separator:a20676d183339cf5fd816172f3b8020c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file provides the collective allocator for ArgoDSM. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>Eta Scale AB. Licensed under the Eta Scale Open Source License. See the LICENSE file for details.</dd></dl>
<p>There are two possible ways of implementing collective allocations: a) one can allocate on ArgoDSM node 0 only, using e.g. barrier-based synchronization to ensure every node arrives at the same value b) every ArgoDSM node maintains its own copy of the memory pool information, and synchronization happens implicitly through the allocation calls being well-ordered</p>
<p>Option b) was chosen here for a single preallocation pool, which is thus shared among all ArgoDSM nodes for collective allocation. Only when the preallocation pool runs out of memory, option a) is used to refill the pool. A single collective broadcast operation is used to synchronize the update among all ArgoDSM nodes. </p>

<p class="definition">Definition in file <a class="el" href="collective__allocator_8hpp_source.html">collective_allocator.hpp</a>.</p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Mar 21 2022 15:09:31 for ArgoDSM - Software Distributed Shared Memory by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
